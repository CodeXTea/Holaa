<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tabung Kemanusiaan ‚Äî Solidariti Palestin</title>

  <!-- Google Charts -->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

  <style>
    :root{
      --bg:#071228;
      --card:#0b1220;
      --accent:#ca3a3a;
      --accent-2:#2e8b57;
      --muted:#94a3b8;
      --glass: rgba(255,255,255,0.04);
      --text:#e6eef8;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      transition:all .15s;
    }

    .page{
      max-width:1100px;
      margin:20px auto;
      padding:16px;
    }

    header{
      display:flex;
      gap:16px;
      align-items:center;
      margin-bottom:8px;
    }
    .logo{
      width:60px;height:60px;border-radius:12px;background:var(--accent);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.2rem;
    }
    h1{margin:0;font-size:1.6rem}
    .lang-select{margin-left:auto;display:flex;gap:8px;align-items:center;color:var(--muted)}
    select{padding:6px;border-radius:8px;background:#07162a;color:var(--text);border:1px solid #203040}

    /* NAV under H1 */
    nav.topnav{
      display:flex;
      gap:12px;
      margin:12px 0 20px 0;
      padding:10px;
      border-radius:10px;
      background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.03);
    }
    nav.topnav button{
      background:transparent;
      color:var(--text);
      border:1px solid rgba(255,255,255,0.03);
      padding:8px 12px;
      border-radius:8px;
      cursor:pointer;
      font-weight:600;
    }
    nav.topnav button:hover{transform:translateY(-2px)}
    nav.topnav button.active{
      background:var(--accent);
      border-color:rgba(0,0,0,0.2);
      box-shadow:0 6px 18px rgba(0,0,0,0.4);
    }

    /* layout */
    .grid{display:grid;grid-template-columns:2fr 1fr;gap:20px}
    @media(max-width:900px){.grid{grid-template-columns:1fr}}

    .card{background:var(--card);padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
    img.rescue{width:100%;border-radius:10px;margin:10px 0;display:block}

    .btn{display:inline-block;padding:10px 14px;border-radius:10px;background:var(--accent);color:#fff;text-decoration:none;font-weight:600}
    .mutebtn{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:8px 12px;border-radius:8px}

    /* tombol penekanan - hanya muncul bila section dipilih */
    .cta{display:none;margin-top:12px;padding:10px 12px;border-radius:10px;font-weight:700}
    .cta.show{display:inline-block}
    .cta.emph{background:var(--accent);color:white}
    .cta.secondary{background:var(--accent-2);color:white}

    /* sections hidden by default except menu */
    .section{display:none;animation:fadeIn .25s ease both}
    .section.active{display:block}

    @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

    /* small helper */
    .muted{color:var(--muted)}
    .small{font-size:.9rem}
    hr{border:none;border-top:1px solid rgba(255,255,255,0.03);margin:12px 0}

    /* charts */
    #chart_stats, #chart_damage{width:100%;min-height:300px}

    /* accessibility button */
    .accessibility{position:fixed;bottom:20px;right:20px;background:#0f172a;color:white;padding:10px 14px;border-radius:50px;cursor:pointer;border:2px solid #233}

    /* RTL support - applied to body by JS when lang = ar */
    .rtl{direction:rtl;text-align:right}
    .rtl nav.topnav{justify-content:flex-start}
  </style>
</head>
<body>
  <div class="page" id="page">
    <header>
      <div class="logo">PF</div>
      <div>
        <h1 id="title">Tabung Kemanusiaan Palestin</h1>
        <div class="small muted" id="subtitle">Solidariti dan bantuan kecemasan</div>
      </div>

      <div class="lang-select">
        <label for="langSelect" id="langLabel">Bahasa:</label>
        <select id="langSelect" aria-label="Pilih Bahasa">
          <option value="ms">Bahasa Melayu</option>
          <option value="en">English</option>
          <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
          <option value="id">Bahasa Indonesia</option>
        </select>
      </div>
    </header>

    <!-- NAV under H1 -->
    <nav class="topnav" role="navigation" aria-label="Main navigation">
      <button data-target="menu" class="active" id="nav_menu">Menu</button>
      <button data-target="history" id="nav_history">Sejarah</button>
      <button data-target="stats" id="nav_stats">Statistik</button>
      <button data-target="damage" id="nav_damage">Kerosakan</button>
    </nav>

    <div class="grid">
      <!-- LEFT: Main content -->
      <main>

        <!-- MENU (default visible) -->
        <section id="menu" class="card section active">
          <h2 id="menu_title">Menu Utama</h2>
          <p id="menu_desc">Pilih tajuk di navbar untuk melihat maklumat lengkap. Video berkaitan disertakan di bawah.</p>

          <!-- video related kept -->
          <div style="position:relative;padding-top:56%;border-radius:10px;overflow:hidden;margin-top:12px">
            <iframe id="related_video" src="https://www.youtube.com/embed/TfKhle4k3d0"
              style="position:absolute;top:0;left:0;width:100%;height:100%;border:0" allowfullscreen title="Video Berkaitan"></iframe>
          </div>

          <div style="margin-top:14px">
            <button class="btn">Derma Sekarang</button>
            <button class="mutebtn" style="margin-left:8px" id="learn_more_btn">Ketahui Lebih Lanjut</button>
          </div>
        </section>

        <!-- HISTORY -->
        <section id="history" class="card section">
          <h2 id="history_title">Sejarah Palestin</h2>
          <p id="history_text">Palestin memiliki sejarah ribuan tahun dan menjadi tanah suci kepada pelbagai komunitas. Konflik moden bermula pada pertengahan abad ke-20 dan memberi impak besar kepada kehidupan rakyat.</p>
          <button class="cta emph" id="history_cta">Baca Sejarah Penuh</button>
        </section>

        <!-- STATS -->
        <section id="stats" class="card section">
          <h2 id="stats_title">Statistik Kematian</h2>
          <div id="chart_stats"></div>
          <div class="small muted" id="stats_note">Graf menunjukkan contoh pecahan mangsa mengikut kumpulan umur; kemaskini data sebenar apabila tersedia.</div>
          <button class="cta secondary" id="stats_cta">Sokong Kecemasan Perubatan</button>
        </section>

        <!-- DAMAGE -->
        <section id="damage" class="card section">
          <h2 id="damage_title">Kerosakan Infrastruktur</h2>
          <div id="chart_damage"></div>
          <p class="small muted" id="damage_note">Graf menunjukkan contoh peratus jenis infrastruktur yang rosak. Sumber data perlu dikemaskini dengan angka rasmi.</p>
          <button class="cta emph" id="damage_cta">Bantuan Infrastruktur</button>
        </section>

      </main>

      <!-- RIGHT: Donation & quick info -->
      <aside>
        <div class="card">
          <h3 id="donation_title">Sumbangan</h3>
          <p id="donation_desc">Pilih kaedah pembayaran dan isi maklumat ringkas.</p>

          <h4 id="qr_label">üí≥ QR Pay (Malaysia)</h4>
          <img class="rescue" src="https://i.imgur.com/0X7GQKp.png" alt="QR Pay" />

          <h4 id="tng_label">üü¶ Touch 'n Go eWallet</h4>
          <img class="rescue" src="tng.png" alt="TnG QR" />

          <h4 id="paypal_label">üåç PayPal</h4>
          <a class="btn" href="#" id="paypal_btn">Derma melalui PayPal</a>

          <hr />

          <div>
            <input id="nameField" type="text" placeholder="Nama penuh" style="width:100%;padding:8px;border-radius:8px;margin:6px 0" />
            <input id="emailField" type="email" placeholder="Emel" style="width:100%;padding:8px;border-radius:8px;margin:6px 0" />
            <button class="btn" style="width:100%;margin-top:10px" onclick="submitDonation()" id="donate_button">Hantar</button>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <h4 id="quick_title">Info Pantas</h4>
          <p id="quick_text" class="small muted">Peta bantuan, kontak kecemasan dan ringkasan isu boleh diletakkan di sini.</p>
        </div>
      </aside>
    </div> <!-- grid -->

  </div> <!-- page -->

  <div class="accessibility" id="okuBtn">‚ôø Mesra OKU</div>

  <script>
    // ------------------------
    // i18n text data
    // ------------------------
    const langData = {
      ms: {
        title: "Tabung Kemanusiaan Palestin",
        subtitle: "Solidariti dan bantuan kecemasan",
        langLabel: "Bahasa:",
        nav: { menu: "Menu", history: "Sejarah", stats: "Statistik", damage: "Kerosakan" },
        menu_title: "Menu Utama",
        menu_desc: "Pilih tajuk di navbar untuk melihat maklumat lengkap. Video berkaitan disertakan di bawah.",
        history_title: "Sejarah Palestin",
        history_text: "Palestin memiliki sejarah ribuan tahun dan menjadi tanah suci kepada pelbagai komunitas. Konflik moden bermula pada pertengahan abad ke-20 dan memberi impak besar kepada kehidupan rakyat.",
        history_cta: "Baca Sejarah Penuh",
        stats_title: "Statistik Kematian",
        stats_note: "Graf menunjukkan contoh pecahan mangsa mengikut kumpulan umur; kemaskini data sebenar apabila tersedia.",
        stats_cta: "Sokong Kecemasan Perubatan",
        damage_title: "Kerosakan Infrastruktur",
        damage_note: "Graf menunjukkan contoh peratus jenis infrastruktur yang rosak. Sumber data perlu dikemaskini dengan angka rasmi.",
        damage_cta: "Bantuan Infrastruktur",
        donation_title: "Sumbangan",
        donation_desc: "Pilih kaedah pembayaran dan isi maklumat ringkas.",
        qr_label: "üí≥ QR Pay (Malaysia)",
        tng_label: "üü¶ Touch 'n Go eWallet",
        paypal_label: "üåç PayPal",
        paypal_btn: "Derma melalui PayPal",
        donate_button: "Hantar",
        quick_title: "Info Pantas",
        quick_text: "Peta bantuan, kontak kecemasan dan ringkasan isu boleh diletakkan di sini.",
        chart_stats_title: "Mangsa mengikut kumpulan umur",
        chart_damage_title: "Peratus Kerosakan Infrastruktur",
        chart_stats_description: "Contoh: Kanak-kanak, Wanita, Warga Emas",
        chart_damage_description: "Contoh: Hospital, Sekolah, Rumah",
      },
      en: {
        title: "Humanitarian Fund Palestine",
        subtitle: "Solidarity and emergency aid",
        langLabel: "Language:",
        nav: { menu: "Menu", history: "History", stats: "Statistics", damage: "Damage" },
        menu_title: "Main Menu",
        menu_desc: "Choose a topic from the navbar to view full details. Related video included below.",
        history_title: "History of Palestine",
        history_text: "Palestine has a history spanning thousands of years and is sacred to multiple communities. The modern conflict began in the mid-20th century with profound effects on civilians.",
        history_cta: "Read Full History",
        stats_title: "Death Statistics",
        stats_note: "Chart shows example breakdown of victims by age group; update with official data when available.",
        stats_cta: "Support Medical Emergency",
        damage_title: "Infrastructure Damage",
        damage_note: "Chart shows sample percentages of damaged infrastructure types. Update with official figures.",
        damage_cta: "Infrastructure Aid",
        donation_title: "Donations",
        donation_desc: "Choose a payment method and enter brief details.",
        qr_label: "üí≥ QR Pay (Malaysia)",
        tng_label: "üü¶ Touch 'n Go eWallet",
        paypal_label: "üåç PayPal",
        paypal_btn: "Donate via PayPal",
        donate_button: "Submit",
        quick_title: "Quick Info",
        quick_text: "Relief maps, emergency contacts and issue summaries can be placed here.",
        chart_stats_title: "Victims by age group",
        chart_damage_title: "Infrastructure Damage Percentage",
        chart_stats_description: "Example: Children, Women, Elderly",
        chart_damage_description: "Example: Hospitals, Schools, Homes",
      },
      ar: {
        title: "ÿµŸÜÿØŸàŸÇ ŸÅŸÑÿ≥ÿ∑ŸäŸÜ ÿßŸÑÿ•ŸÜÿ≥ÿßŸÜŸä",
        subtitle: "ÿ™ÿ∂ÿßŸÖŸÜ Ÿàÿ•ÿ∫ÿßÿ´ÿ© ÿ∑ÿßÿ±ÿ¶ÿ©",
        langLabel: "ÿßŸÑŸÑÿ∫ÿ©:",
        nav: { menu: "ÿßŸÑŸÇÿßÿ¶ŸÖÿ©", history: "ÿßŸÑÿ™ÿßÿ±ŸäÿÆ", stats: "ÿßŸÑÿ•ÿ≠ÿµÿßÿ°ÿßÿ™", damage: "ÿßŸÑÿ£ÿ∂ÿ±ÿßÿ±" },
        menu_title: "ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
        menu_desc: "ÿßÿÆÿ™Ÿéÿ± ŸÖŸàÿ∂ŸàÿπŸãÿß ŸÖŸÜ ÿ¥ÿ±Ÿäÿ∑ ÿßŸÑÿ™ŸÜŸÇŸÑ ŸÑÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ. ÿßŸÑŸÅŸäÿØŸäŸà ÿßŸÑŸÖÿ™ÿπŸÑŸÇ ŸÖŸèÿØÿ±Ÿéÿ¨ ÿ£ÿØŸÜÿßŸá.",
        history_title: "ÿ™ÿßÿ±ŸäÿÆ ŸÅŸÑÿ≥ÿ∑ŸäŸÜ",
        history_text: "ÿ™ŸÖÿ™ŸÑŸÉ ŸÅŸÑÿ≥ÿ∑ŸäŸÜ ÿ™ÿßÿ±ŸäÿÆŸãÿß ŸäÿπŸàÿØ ŸÑÿ¢ŸÑÿßŸÅ ÿßŸÑÿ≥ŸÜŸäŸÜ ŸàŸáŸä ŸÖŸÇÿØŸëÿ≥ÿ© ŸÑÿπÿØÿ© ŸÖÿ¨ÿ™ŸÖÿπÿßÿ™. ÿ®ÿØÿ£ ÿßŸÑÿµÿ±ÿßÿπ ÿßŸÑÿ≠ÿØŸäÿ´ ŸÅŸä ŸÖŸÜÿ™ÿµŸÅ ÿßŸÑŸÇÿ±ŸÜ ÿßŸÑÿπÿ¥ÿ±ŸäŸÜ ŸàŸÑŸá ÿ¢ÿ´ÿßÿ± ŸÉÿ®Ÿäÿ±ÿ© ÿπŸÑŸâ ÿßŸÑÿ≥ŸÉÿßŸÜ ÿßŸÑŸÖÿØŸÜŸäŸäŸÜ.",
        history_cta: "ÿßŸÇÿ±ÿ£ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸÉÿßŸÖŸÑ",
        stats_title: "ÿ•ÿ≠ÿµÿßÿ°ÿßÿ™ ÿßŸÑŸàŸÅŸäÿßÿ™",
        stats_note: "ŸäŸàÿ∂ÿ≠ ÿßŸÑÿ±ÿ≥ŸÖ ŸÖÿ´ÿßŸÑŸãÿß ŸÑÿ™ŸÇÿ≥ŸäŸÖ ÿßŸÑÿ∂ÿ≠ÿßŸäÿß ÿ≠ÿ≥ÿ® ÿßŸÑŸÅÿ¶ÿ© ÿßŸÑÿπŸÖÿ±Ÿäÿ©ÿõ ÿ≠ÿØŸëÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ±ÿ≥ŸÖŸäÿ© ÿπŸÜÿØ ÿ™ŸàŸÅÿ±Ÿáÿß.",
        stats_cta: "ÿßÿØÿπŸÖ ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶ ÿßŸÑÿ∑ÿ®Ÿäÿ©",
        damage_title: "ÿ£ÿ∂ÿ±ÿßÿ± ÿßŸÑÿ®ŸÜŸäÿ© ÿßŸÑÿ™ÿ≠ÿ™Ÿäÿ©",
        damage_note: "ŸäŸàÿ∂ÿ≠ ÿßŸÑÿ±ÿ≥ŸÖ ŸÜÿ≥ÿ®Ÿãÿß ŸÜŸÖŸàÿ∞ÿ¨Ÿäÿ© ŸÑÿ£ŸÜŸàÿßÿπ ÿßŸÑÿ®ŸÜŸäÿ© ÿßŸÑÿ™ÿ≠ÿ™Ÿäÿ© ÿßŸÑŸÖÿ™ÿ∂ÿ±ÿ±ÿ©. ÿ≠ÿØŸëÿ´Ÿáÿß ÿ®ÿßŸÑÿ£ÿ±ŸÇÿßŸÖ ÿßŸÑÿ±ÿ≥ŸÖŸäÿ©.",
        damage_cta: "ŸÖÿ≥ÿßÿπÿØÿ© ŸÑŸÑÿ®ŸÜŸäÿ© ÿßŸÑÿ™ÿ≠ÿ™Ÿäÿ©",
        donation_title: "ÿßŸÑÿ™ÿ®ÿ±ÿπÿßÿ™",
        donation_desc: "ÿßÿÆÿ™ÿ± ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ Ÿàÿ£ÿØÿÆŸÑ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©.",
        qr_label: "üí≥ ÿ≥ÿØÿßÿØ ÿπÿ®ÿ± QR (ŸÖÿßŸÑŸäÿ≤Ÿäÿß)",
        tng_label: "üü¶ Touch 'n Go eWallet",
        paypal_label: "üåç ÿ®ÿßŸä ÿ®ÿßŸÑ",
        paypal_btn: "ÿßŸÑÿ™ÿ®ÿ±ÿπ ÿπÿ®ÿ± ÿ®ÿßŸä ÿ®ÿßŸÑ",
        donate_button: "ÿ•ÿ±ÿ≥ÿßŸÑ",
        quick_title: "ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ≥ÿ±Ÿäÿπÿ©",
        quick_text: "ŸäŸÖŸÉŸÜ Ÿàÿ∂ÿπ ÿÆÿ±ÿßÿ¶ÿ∑ ÿßŸÑÿ•ÿ∫ÿßÿ´ÿ©ÿå ÿ¨Ÿáÿßÿ™ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿßŸÑÿ∑ÿßÿ±ÿ¶ÿ© ŸàŸÖŸÑÿÆÿµÿßÿ™ ÿßŸÑŸÇÿ∂ÿßŸäÿß ŸáŸÜÿß.",
        chart_stats_title: "ÿßŸÑÿ∂ÿ≠ÿßŸäÿß ÿ≠ÿ≥ÿ® ÿßŸÑŸÅÿ¶ÿ© ÿßŸÑÿπŸÖÿ±Ÿäÿ©",
        chart_damage_title: "ŸÜÿ≥ÿ®ÿ© ÿ£ÿ∂ÿ±ÿßÿ± ÿßŸÑÿ®ŸÜŸäÿ© ÿßŸÑÿ™ÿ≠ÿ™Ÿäÿ©",
        chart_stats_description: "ŸÖÿ´ÿßŸÑ: ÿ£ÿ∑ŸÅÿßŸÑÿå ŸÜÿ≥ÿßÿ°ÿå ŸÉÿ®ÿßÿ± ÿßŸÑÿ≥ŸÜ",
        chart_damage_description: "ŸÖÿ´ÿßŸÑ: ŸÖÿ≥ÿ™ÿ¥ŸÅŸäÿßÿ™ÿå ŸÖÿØÿßÿ±ÿ≥ÿå ŸÖŸÜÿßÿ≤ŸÑ",
      },
      id: {
        title: "Dana Kemanusiaan Palestina",
        subtitle: "Solidaritas dan bantuan darurat",
        langLabel: "Bahasa:",
        nav: { menu: "Menu", history: "Sejarah", stats: "Statistik", damage: "Kerusakan" },
        menu_title: "Menu Utama",
        menu_desc: "Pilih topik dari navbar untuk melihat rincian lengkap. Video terkait disertakan di bawah.",
        history_title: "Sejarah Palestina",
        history_text: "Palestina memiliki sejarah ribuan tahun dan suci bagi beberapa komunitas. Konflik modern dimulai pada pertengahan abad ke-20 dan berdampak besar pada warga sipil.",
        history_cta: "Baca Sejarah Lengkap",
        stats_title: "Statistik Kematian",
        stats_note: "Grafik menunjukkan contoh pembagian korban menurut kelompok usia; perbarui dengan data resmi bila tersedia.",
        stats_cta: "Dukung Darurat Medis",
        damage_title: "Kerusakan Infrastruktur",
        damage_note: "Grafik menunjukkan persentase contoh tipe infrastruktur yang rusak. Perbarui dengan angka resmi.",
        damage_cta: "Bantuan Infrastruktur",
        donation_title: "Donasi",
        donation_desc: "Pilih metode pembayaran dan masukkan detail singkat.",
        qr_label: "üí≥ QR Pay (Malaysia)",
        tng_label: "üü¶ Touch 'n Go eWallet",
        paypal_label: "üåç PayPal",
        paypal_btn: "Donasi via PayPal",
        donate_button: "Kirim",
        quick_title: "Info Singkat",
        quick_text: "Peta bantuan, kontak darurat, dan ringkasan isu dapat ditempatkan di sini.",
        chart_stats_title: "Korban menurut kelompok umur",
        chart_damage_title: "Persentase Kerusakan Infrastruktur",
        chart_stats_description: "Contoh: Anak-anak, Wanita, Lansia",
        chart_damage_description: "Contoh: Rumah Sakit, Sekolah, Rumah",
      }
    };

    // ------------------------
    // Elements
    // ------------------------
    const navButtons = document.querySelectorAll('nav.topnav button');
    const sections = document.querySelectorAll('.section');
    const langSelect = document.getElementById('langSelect');

    // cta buttons
    const historyCta = document.getElementById('history_cta');
    const statsCta = document.getElementById('stats_cta');
    const damageCta = document.getElementById('damage_cta');

    // chart containers
    const chartStatsDiv = document.getElementById('chart_stats');
    const chartDamageDiv = document.getElementById('chart_damage');

    // init Google charts
    google.charts.load('current', {'packages':['corechart','bar']});
    google.charts.setOnLoadCallback(initCharts);

    let currentLang = 'ms';
    let chartsLoaded = false;

    // ------------------------
    // Navigation behaviour
    // ------------------------
    navButtons.forEach(btn => {
      btn.addEventListener('click', (e) => {
        const target = btn.getAttribute('data-target');
        showOnlySection(target);
        setActiveNav(btn);
      });
    });

    function setActiveNav(activeBtn){
      navButtons.forEach(b => b.classList.remove('active'));
      activeBtn.classList.add('active');
    }

    function showOnlySection(id){
      sections.forEach(s => {
        if(s.id === id){
          s.classList.add('active');
        } else {
          s.classList.remove('active');
        }
      });

      // show CTAs only for the active section
      // hide all first
      [historyCta, statsCta, damageCta].forEach(c => c.classList.remove('show'));
      if(id === 'history') historyCta.classList.add('show');
      if(id === 'stats') statsCta.classList.add('show');
      if(id === 'damage') damageCta.classList.add('show');

      // If stats or damage shown, redraw charts for current language
      if(id === 'stats' || id === 'damage'){
        drawCharts(); // ensure charts drawn/redrawn
      }
    }

    // default is menu visible (already active)

    // ------------------------
    // Language switching
    // ------------------------
    function applyLanguage(lang){
      currentLang = lang;
      const d = langData[lang];

      // Title & header
      document.getElementById('title').textContent = d.title;
      document.getElementById('subtitle').textContent = d.subtitle;
      document.getElementById('langLabel').textContent = d.langLabel;

      // Nav labels
      document.getElementById('nav_menu').textContent = d.nav.menu;
      document.getElementById('nav_history').textContent = d.nav.history;
      document.getElementById('nav_stats').textContent = d.nav.stats;
      document.getElementById('nav_damage').textContent = d.nav.damage;

      // Menu
      document.getElementById('menu_title').textContent = d.menu_title;
      document.getElementById('menu_desc').textContent = d.menu_desc;

      // History
      document.getElementById('history_title').textContent = d.history_title;
      document.getElementById('history_text').textContent = d.history_text;
      historyCta.textContent = d.history_cta;

      // Stats
      document.getElementById('stats_title').textContent = d.stats_title;
      document.getElementById('stats_note').textContent = d.stats_note;
      statsCta.textContent = d.stats_cta;

      // Damage
      document.getElementById('damage_title').textContent = d.damage_title;
      document.getElementById('damage_note').textContent = d.damage_note;
      damageCta.textContent = d.damage_cta;

      // Donation/right
      document.getElementById('donation_title').textContent = d.donation_title;
      document.getElementById('donation_desc').textContent = d.donation_desc;
      document.getElementById('qr_label').textContent = d.qr_label;
      document.getElementById('tng_label').textContent = d.tng_label;
      document.getElementById('paypal_label').textContent = d.paypal_label;
      document.getElementById('paypal_btn').textContent = d.paypal_btn;
      document.getElementById('donate_button').textContent = d.donate_button;
      document.getElementById('quick_title').textContent = d.quick_title;
      document.getElementById('quick_text').textContent = d.quick_text;

      // Set page direction for Arabic (RTL) otherwise LTR
      if(lang === 'ar'){
        document.documentElement.lang = 'ar';
        document.body.classList.add('rtl');
      } else {
        document.documentElement.lang = lang;
        document.body.classList.remove('rtl');
      }

      // redraw charts with localized titles/labels
      drawCharts();
    }

    langSelect.addEventListener('change', (e) => {
      applyLanguage(e.target.value);
    });

    // initial
    applyLanguage(currentLang);

    // ------------------------
    // Charts logic (Google Charts)
    // ------------------------
    function initCharts(){
      chartsLoaded = true;
      drawCharts();
    }

    function drawCharts(){
      if(!chartsLoaded) return;
      const d = langData[currentLang];

      // ---------- Stats Bar Chart ----------
      // sample data: [group, number]
      const statsData = google.visualization.arrayToDataTable([
        [ d.chart_stats_title || 'Group', 'Count', { role: 'style' } ],
        [ d.chart_stats_description ? d.chart_stats_description.split(',')[0].trim() : 'Children', 1200, 'opacity: 0.9' ],
        [ d.chart_stats_description ? d.chart_stats_description.split(',')[1].trim() : 'Women', 900, 'opacity: 0.9' ],
        [ d.chart_stats_description ? d.chart_stats_description.split(',')[2].trim() : 'Elderly', 300, 'opacity: 0.9' ],
      ]);

      const statsOptions = {
        title: d.chart_stats_title,
        height: 320,
        legend: { position: 'none' },
        vAxis: { title: '' },
        hAxis: { title: '' },
        chartArea: { left:60, right:20, top:50, bottom:60 },
        colors: [ currentLang === 'ar' ? '#ca3a3a' : '#ca3a3a' ]
      };

      const statsChart = new google.visualization.ColumnChart(chartStatsDiv);
      statsChart.draw(statsData, statsOptions);

      // ---------- Damage Pie Chart ----------
      const damageData = google.visualization.arrayToDataTable([
        [ d.chart_damage_title || 'Type', 'Percent' ],
        [ d.chart_damage_description ? d.chart_damage_description.split(',')[0].trim() : 'Hospitals', 35 ],
        [ d.chart_damage_description ? d.chart_damage_description.split(',')[1].trim() : 'Schools', 25 ],
        [ d.chart_damage_description ? d.chart_damage_description.split(',')[2].trim() : 'Homes', 40 ]
      ]);

      const damageOptions = {
        title: d.chart_damage_title,
        height: 320,
        pieHole: 0.35,
        chartArea: { left:20, right:20, top:50, bottom:60 },
      };

      const damageChart = new google.visualization.PieChart(chartDamageDiv);
      damageChart.draw(damageData, damageOptions);
    }

    // Make charts responsive on resize
    window.addEventListener('resize', () => {
      drawCharts();
    });

    // ------------------------
    // Donation/demo handlers
    // ------------------------
    function submitDonation(){
      const name = document.getElementById('nameField').value.trim();
      if(!name){
        alert(currentLang === 'en' ? 'Please enter your name' : (currentLang === 'ar' ? 'Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿßÿ≥ŸÖ' : 'Sila masukkan nama'));
        return;
      }
      alert(currentLang === 'en' ? 'Thank you for your donation! (demo)' : (currentLang === 'ar' ? 'ÿ¥ŸÉÿ±Ÿãÿß ŸÑÿ™ÿ®ÿ±ÿπŸÉ! (ÿ™ÿ¨ÿ±Ÿäÿ®Ÿä)' : 'Terima kasih atas sumbangan! (demo)'));
      document.getElementById('nameField').value = '';
      document.getElementById('emailField').value = '';
    }
    window.submitDonation = submitDonation;

    // ------------------------
    // OKU accessibility toggle
    // ------------------------
    const okuBtn = document.getElementById('okuBtn');
    let oku = false;
    okuBtn.addEventListener('click', () => {
      oku = !oku;
      if(oku){
        document.body.style.fontSize = '1.25rem';
        okuBtn.textContent = (currentLang === 'ar' ? 'ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä ‚ôø' : (currentLang === 'en' ? 'Normal Mode ‚ôø' : '‚ôø Mod Biasa'));
      } else {
        document.body.style.fontSize = '';
        okuBtn.textContent = (currentLang === 'ar' ? '‚ôø ŸÜŸÖÿ∑ ÿßŸÑŸàÿµŸàŸÑ' : (currentLang === 'en' ? '‚ôø Accessibility' : '‚ôø Mesra OKU'));
      }
    });

    // ------------------------
    // Init: ensure menu active and nav highlight
    // ------------------------
    document.querySelector('nav.topnav button[data-target="menu"]').classList.add('active');

    // Ensure charts updated after load if stats/damage viewed
    // Nothing else to do ‚Äî everything handled by drawCharts and showOnlySection

  </script>
</body>
</html>
