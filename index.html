<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tabung Kemanusiaan Palestin</title>

  <!-- Google Charts -->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

  <style>
    :root {
      --bg: #071228;
      --card: #0b1220;
      --accent: #ca3a3a;
      --accent-2: #2e8b57;
      --muted: #94a3b8;
      --text: #e6eef8;
    }
    * { box-sizing: border-box; scroll-behavior: smooth; }
    html, body { margin: 0; padding: 0; font-family: Inter, system-ui, sans-serif; background: var(--bg); color: var(--text); line-height: 1.5; }
    .page { max-width: 1100px; margin: 20px auto; padding: 16px; }
    header { display: flex; align-items: center; gap: 16px; margin-bottom: 8px; }
    .logo { width: 60px; height: 60px; border-radius: 12px; background: var(--accent); display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.2rem; }
    h1 { margin: 0; font-size: 1.6rem; }
    .small { font-size: .9rem; }
    .muted { color: var(--muted); }

    .lang-select { margin-left: auto; display: flex; gap: 8px; align-items: center; color: var(--muted); }
    select { padding: 6px; border-radius: 8px; background: #07162a; color: var(--text); border: 1px solid #203040; }

    nav.topnav { display: flex; gap: 12px; margin: 12px 0 20px; padding: 10px; border-radius: 10px; background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01)); border: 1px solid rgba(255,255,255,0.03); }
    nav.topnav button { background: transparent; color: var(--text); border: 1px solid rgba(255,255,255,0.03); padding: 8px 12px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: transform .1s; }
    nav.topnav button:hover { transform: translateY(-2px); }
    nav.topnav button.active { background: var(--accent); border-color: rgba(0,0,0,0.2); box-shadow: 0 6px 18px rgba(0,0,0,0.4); }

    .grid { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
    @media (max-width: 900px) { .grid { grid-template-columns: 1fr; } }

    .card { background: var(--card); padding: 18px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.03); }
    img.rescue { width: 100%; border-radius: 10px; margin: 10px 0; display: block; }

    .btn { display: inline-block; padding: 10px 14px; border-radius: 10px; background: var(--accent); color: #fff; text-decoration: none; font-weight: 600; }
    .mutebtn { background: transparent; border: 1px solid rgba(255,255,255,0.06); color: var(--muted); padding: 8px 12px; border-radius: 8px; }

    .cta { display: none; margin-top: 12px; padding: 10px 12px; border-radius: 10px; font-weight: 700; }
    .cta.show { display: inline-block; }
    .cta.emph { background: var(--accent); color: white; }
    .cta.secondary { background: var(--accent-2); color: white; }

    .section { display: none; animation: fadeIn .25s ease both; }
    .section.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(6px) } to { opacity: 1; transform: none } }

    #chart_stats, #chart_damage { width: 100%; min-height: 300px; }

    .accessibility { position: fixed; bottom: 20px; right: 20px; background: #0f172a; color: white; padding: 10px 14px; border-radius: 50px; cursor: pointer; border: 2px solid #233; }

    .rtl { direction: rtl; text-align: right; }
    .rtl nav.topnav { justify-content: flex-start; }
  </style>
</head>
<body>
  <div class="page">

    <header>
      <div class="logo">PF</div>
      <div>
        <h1 id="title">Tabung Kemanusiaan Palestin</h1>
        <div class="small muted" id="subtitle">Solidariti dan bantuan kecemasan</div>
      </div>
      <div class="lang-select">
        <label for="langSelect" id="langLabel">Bahasa:</label>
        <select id="langSelect">
          <option value="ms">Bahasa Melayu</option>
          <option value="en">English</option>
          <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
          <option value="id">Bahasa Indonesia</option>
        </select>
      </div>
    </header>

    <nav class="topnav" role="navigation">
      <button data-target="menu" class="active" id="nav_menu">Menu</button>
      <button data-target="history" id="nav_history">Sejarah</button>
      <button data-target="stats" id="nav_stats">Statistik</button>
      <button data-target="damage" id="nav_damage">Kerosakan</button>
    </nav>

    <div class="grid">
      <main>
        <!-- MENU -->
        <section id="menu" class="card section active">
          <h2 id="menu_title">Menu Utama</h2>
          <p id="menu_desc">Pilih bahagian di atas untuk melihat sejarah, statistik dan kerosakan.</p>
          <div style="position:relative;padding-top:56%;border-radius:10px;overflow:hidden;margin-top:12px">
            <iframe id="related_video" src="https://www.youtube.com/embed/TfKhle4k3d0" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0" allowfullscreen></iframe>
          </div>
        </section>

            <!-- SEJARAH -->
        <section id="history" class="card section">
          <h2 id="history_title">Sejarah Palestin</h2>
          <p id="history_text">
            <strong>Zaman Purba & Biblical (lebih 10,000 tahun lalu):</strong> Palestin didiami sejak zaman Neolitik, termasuk kota Jericho dan Hebron. Menjadi pusat perdagangan dan budaya Mesir, Filistin, dan kerajaan semasa.<br><br>
            <strong>Zaman Rom & Byzantium:</strong> Kawasan menjadi sebahagian Empayar Rom, Jerusalem menjadi pusat agama Yahudi dan Kristian awal, berulang kali ditakluk.<br><br>
            <strong>Zaman Islam (632‚Äì1517 M):</strong> Wilayah di bawah Khalifah Umayyah, Abbasiyah, Fatimiyah. Masjid Al-Aqsa dan Dome of the Rock dibina.<br><br>
            <strong>Zaman Uthmaniyah (1517‚Äì1917):</strong> Palestin menjadi sebahagian Empayar Uthmaniyah, bandar Gaza, Nablus, Jerusalem, Hebron berkembang.<br><br>
            <strong>Mandat British (1917‚Äì1947):</strong> Selepas Perang Dunia I, Deklarasi Balfour 1917 ‚Üí ketegangan Yahudi-Palestin meningkat.<br><br>
            <strong>1948 ‚Äì Nakba & Penubuhan Israel:</strong> Israel diisytiharkan, ribuan Palestin dipindahkan, Gaza di bawah Mesir, Tebing Barat di bawah Jordan.<br><br>
            <strong>1967 ‚Äì Perang Enam Hari:</strong> Israel menakluk Tebing Barat, Gaza, Baitulmaqdis Timur, memulakan era pendudukan.<br><br>
            <strong>1987‚Äì2000 ‚Äì Intifada & Perjanjian Oslo:</strong> Intifada pertama & kedua, perjanjian Oslo 1993, keganasan berulang.<br><br>
            <strong>2005‚Äì2014 ‚Äì Gaza & Hamas:</strong> Israel tarik diri (2005), Hamas ambil alih Gaza (2007), serangan berulang, korban ramai, infrastruktur rosak.<br><br>
            <strong>2014‚Äì2022 ‚Äì Konflik & Krisis Kemanusiaan:</strong> Konflik Gaza, ribuan korban, sekolah, hospital, bekalan asas rosak.<br><br>
            <strong>7 Oktober 2023 hingga kini:</strong> Konflik besar, ribuan terbunuh, pengungsian besar, laporan UN/OCHA/UNRWA ‚Üí krisis kemanusiaan serius.
          </p>
          <button class="cta secondary" id="history_cta">Sumbang untuk Sejarah & Pendidikan</button>
        </section>


        <!-- STATISTIK -->
        <section id="stats" class="card section">
          <h2 id="stats_title">Statistik Kematian (Live)</h2>
          <div id="chart_stats"></div>
          <div class="small muted" id="stats_note">Memuat data ‚Ä¶</div>
          <button class="cta secondary" id="stats_cta">Sokong Kecemasan Perubatan</button>
        </section>

        <!-- KEROSAKAN -->
        <section id="damage" class="card section">
          <h2 id="damage_title">Kerosakan Infrastruktur (Live)</h2>
          <div id="chart_damage"></div>
          <p class="small muted" id="damage_note">Memuat data ‚Ä¶</p>
          <button class="cta emph" id="damage_cta">Bantuan Infrastruktur</button>
        </section>
      </main>

      <aside class="card">
        <h3 id="donation_title">Sumbangan</h3>
        <p id="donation_desc">Pilih kaedah pembayaran dan isi maklumat ringkas.</p>

        <h4 id="qr_label">üí≥ QR Pay (Malaysia)</h4>
        <img class="rescue" src="https://i.imgur.com/0X7GQKp.png" alt="QR Pay" />

        <h4 id="tng_label">üü¶ Touch 'n Go eWallet</h4>
        <img class="rescue" src="tng.png" alt="TnG QR" />

        <h4 id="paypal_label">üåç PayPal</h4>
        <a class="btn" href="#" id="paypal_btn">Derma melalui PayPal</a>

        <hr />

        <input id="nameField" type="text" placeholder="Nama penuh" style="width:100%;padding:8px;border-radius:8px;margin:6px 0" />
        <input id="emailField" type="email" placeholder="Emel" style="width:100%;padding:8px;border-radius:8px;margin:6px 0" />
        <button class="btn" style="width:100%;margin-top:10px" onclick="submitDonation()" id="donate_button">Hantar</button>
      </aside>
    </div> <!-- .grid -->

    <div class="accessibility" id="okuBtn">‚ôø Mesra OKU</div>
  </div> <!-- .page -->

  <script>
    // Data bahasa
    const langData = {
      ms: {
        title: "Tabung Kemanusiaan Palestin",
        subtitle: "Solidariti dan bantuan kecemasan",
        langLabel: "Bahasa:",
        nav: { menu: "Menu", history: "Sejarah", stats: "Statistik", damage: "Kerosakan" },
        menu_title: "Menu Utama",
        menu_desc: "Pilih bahagian di atas untuk melihat sejarah, statistik dan kerosakan.",
        history_title: "Sejarah Palestin",
        history_text: "Pa ... (sama seperti di HTML) ...",
        stats_title: "Statistik Kematian (Live)",
        stats_note: "Memuat data ‚Ä¶",
        stats_cta: "Sokong Kecemasan Perubatan",
        damage_title: "Kerosakan Infrastruktur (Live)",
        damage_note: "Memuat data ‚Ä¶",
        damage_cta: "Bantuan Infrastruktur",
        donation_title: "Sumbangan",
        donation_desc: "Pilih kaedah pembayaran dan isi maklumat ringkas.",
        qr_label: "üí≥ QR Pay (Malaysia)",
        tng_label: "üü¶ Touch 'n Go eWallet",
        paypal_label: "üåç PayPal",
        paypal_btn: "Derma melalui PayPal",
        donate_button: "Hantar",
        quick_title: "",
        quick_text: "",
        chart_stats_title: "Korban Harian",
        chart_damage_title: "Pecahan Umur / Kerosakan",
        chart_stats_description: "Tarikh, Kematian",
        chart_damage_description: "Jenis / Peratus"
      },
      en: {
        title: "Palestine Humanitarian Fund",
        subtitle: "Solidarity and emergency aid",
        langLabel: "Language:",
        nav: { menu: "Menu", history: "History", stats: "Statistics", damage: "Damage" },
        menu_title: "Main Menu",
        menu_desc: "Use the tabs above to navigate the history, statistics and damage.",
        history_title: "History of Palestine",
        history_text: "Palestine has a long and complex history ... (ringkasan seperti di atas) ...",
        stats_title: "Death Statistics (Live)",
        stats_note: "Loading data ‚Ä¶",
        stats_cta: "Support Medical Emergency",
        damage_title: "Infrastructure Damage (Live)",
        damage_note: "Loading data ‚Ä¶",
        damage_cta: "Infrastructure Aid",
        donation_title: "Donations",
        donation_desc: "Choose a payment method and fill your details.",
        qr_label: "üí≥ QR Pay (Malaysia)",
        tng_label: "üü¶ Touch 'n Go eWallet",
        paypal_label: "üåç PayPal",
        paypal_btn: "Donate via PayPal",
        donate_button: "Submit",
        quick_title: "",
        quick_text: "",
        chart_stats_title: "Daily Casualties",
        chart_damage_title: "Breakdown / Damage",
        chart_stats_description: "Date, Deaths",
        chart_damage_description: "Type, Percent"
      },
      ar: {
        title: "ÿµŸÜÿØŸàŸÇ ŸÅŸÑÿ≥ÿ∑ŸäŸÜ ÿßŸÑÿ•ŸÜÿ≥ÿßŸÜŸä",
        subtitle: "ÿ™ÿ∂ÿßŸÖŸÜ Ÿàÿ•ÿ∫ÿßÿ´ÿ© ÿ∑ÿßÿ±ÿ¶ÿ©",
        langLabel: "ÿßŸÑŸÑÿ∫ÿ©:",
        nav: { menu: "ÿßŸÑŸÇÿßÿ¶ŸÖÿ©", history: "ÿßŸÑÿ™ÿßÿ±ŸäÿÆ", stats: "ÿßŸÑÿ•ÿ≠ÿµÿßÿ°ÿßÿ™", damage: "ÿßŸÑÿ£ÿ∂ÿ±ÿßÿ±" },
        menu_title: "ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
        menu_desc: "ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ™ÿ®ŸàŸäÿ®ÿßÿ™ ÿ£ÿπŸÑÿßŸá ŸÑŸÑÿ™ŸÜŸÇŸÑ ÿ®ŸäŸÜ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ ŸàÿßŸÑÿ•ÿ≠ÿµÿßÿ°ÿßÿ™ ŸàÿßŸÑÿ£ÿ∂ÿ±ÿßÿ±.",
        history_title: "ÿ™ÿßÿ±ŸäÿÆ ŸÅŸÑÿ≥ÿ∑ŸäŸÜ",
        history_text: "ÿ™ŸÖÿ™ŸÑŸÉ ŸÅŸÑÿ≥ÿ∑ŸäŸÜ ÿ™ÿßÿ±ŸäÿÆŸãÿß ÿ∑ŸàŸäŸÑŸãÿß ŸàŸÖÿ™ÿ¥ÿßÿ®ŸÉŸãÿß ... (sama ringkasan) ...",
        stats_title: "ÿ•ÿ≠ÿµÿßÿ°ÿßÿ™ ÿßŸÑŸàŸÅŸäÿßÿ™ (ŸÖÿ®ÿßÿ¥ÿ±)",
        stats_note: "ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ‚Ä¶",
        stats_cta: "ÿßÿØÿπŸÖ ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶ ÿßŸÑÿ∑ÿ®Ÿäÿ©",
        damage_title: "ÿ£ÿ∂ÿ±ÿßÿ± ÿßŸÑÿ®ŸÜŸäÿ© ÿßŸÑÿ™ÿ≠ÿ™Ÿäÿ© (ŸÖÿ®ÿßÿ¥ÿ±)",
        damage_note: "ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ‚Ä¶",
        damage_cta: "ŸÖÿ≥ÿßÿπÿØÿ© ÿßŸÑÿ®ŸÜŸäÿ© ÿßŸÑÿ™ÿ≠ÿ™Ÿäÿ©",
        donation_title: "ÿßŸÑÿ™ÿ®ÿ±ÿπÿßÿ™",
        donation_desc: "ÿßÿÆÿ™ÿ± ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ Ÿàÿ£ÿØÿÆŸÑ ÿ™ŸÅÿßÿµŸäŸÑŸÉ.",
        qr_label: "üí≥ ÿ≥ÿØÿßÿØ QR (ŸÖÿßŸÑŸäÿ≤Ÿäÿß)",
        tng_label: "üü¶ Touch 'n Go eWallet",
        paypal_label: "üåç ÿ®ÿßŸä ÿ®ÿßŸÑ",
        paypal_btn: "ÿßŸÑÿ™ÿ®ÿ±ÿπ ÿπÿ®ÿ± ÿ®ÿßŸä ÿ®ÿßŸÑ",
        donate_button: "ÿ•ÿ±ÿ≥ÿßŸÑ",
        quick_title: "",
        quick_text: "",
        chart_stats_title: "ÿßŸÑÿ∂ÿ≠ÿßŸäÿß ÿßŸÑŸäŸàŸÖŸäÿ©",
        chart_damage_title: "ÿ™ŸÅÿµŸäŸÑ / ÿßŸÑÿ£ÿ∂ÿ±ÿßÿ±",
        chart_stats_description: "ÿ™ÿßÿ±ŸäÿÆÿå ŸàŸÅŸäÿßÿ™",
        chart_damage_description: "ŸÜŸàÿπÿå ŸÜÿ≥ÿ®ÿ©"
      },
      id: {
        title: "Dana Kemanusiaan Palestina",
        subtitle: "Solidaritas dan bantuan darurat",
        langLabel: "Bahasa:",
        nav: { menu: "Menu", history: "Sejarah", stats: "Statistik", damage: "Kerusakan" },
        menu_title: "Menu Utama",
        menu_desc: "Gunakan tab di atas untuk melihat sejarah, statistik, dan kerusakan.",
        history_title: "Sejarah Palestina",
        history_text: "Palestina memiliki sejarah panjang dan kompleks ... (sama ringkasan) ...",
        stats_title: "Statistik Kematian (Live)",
        stats_note: "Memuat data ‚Ä¶",
        stats_cta: "Dukung Darurat Medis",
        damage_title: "Kerusakan Infrastruktur (Live)",
        damage_note: "Memuat data ‚Ä¶",
        damage_cta: "Bantuan Infrastruktur",
        donation_title: "Donasi",
        donation_desc: "Pilih metode pembayaran dan isi detail Anda.",
        qr_label: "üí≥ QR Pay (Malaysia)",
        tng_label: "üü¶ Touch 'n Go eWallet",
        paypal_label: "üåç PayPal",
        paypal_btn: "Donasi via PayPal",
        donate_button: "Kirim",
        quick_title: "",
        quick_text: "",
        chart_stats_title: "Korban Harian",
        chart_damage_title: "Rincian / Kerusakan",
        chart_stats_description: "Tanggal, Kematian",
        chart_damage_description: "Jenis, Persentase"
      }
    };

    // Elemen
    const navButtons = document.querySelectorAll('nav.topnav button');
    const sections = document.querySelectorAll('.section');
    const langSelect = document.getElementById('langSelect');
    const historyCta = document.getElementById('history_cta');
    const statsCta = document.getElementById('stats_cta');
    const damageCta = document.getElementById('damage_cta');
    const okuBtn = document.getElementById('okuBtn');
    let currentLang = 'ms';
    let chartsLoaded = false;

    // Inisialisasi Google Charts
    google.charts.load('current', { packages: ['corechart', 'bar'] });
    google.charts.setOnLoadCallback(() => {
      chartsLoaded = true;
      drawChartsLive();
    });

    // Tunjuk section berdasar nav
    navButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const tgt = btn.getAttribute('data-target');
        sections.forEach(s => { s.classList.remove('active'); });
        document.getElementById(tgt).classList.add('active');
        navButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        // tunjuk cta
        [historyCta, statsCta, damageCta].forEach(c => c.classList.remove('show'));
        if (tgt === 'history') historyCta.classList.add('show');
        if (tgt === 'stats') statsCta.classList.add('show');
        if (tgt === 'damage') damageCta.classList.add('show');

        if (tgt === 'stats' || tgt === 'damage') {
          drawChartsLive();
        }
      });
    });

    // Tukar bahasa
    function applyLanguage(lang) {
      currentLang = lang;
      const d = langData[lang];
      document.getElementById('title').textContent = d.title;
      document.getElementById('subtitle').textContent = d.subtitle;
      document.getElementById('langLabel').textContent = d.langLabel;
      document.getElementById('nav_menu').textContent = d.nav.menu;
      document.getElementById('nav_history').textContent = d.nav.history;
      document.getElementById('nav_stats').textContent = d.nav.stats;
      document.getElementById('nav_damage').textContent = d.nav.damage;

      document.getElementById('menu_title').textContent = d.menu_title;
      document.getElementById('menu_desc').textContent = d.menu_desc;
      document.getElementById('history_title').textContent = d.history_title;
      document.getElementById('history_text').textContent = d.history_text;
      historyCta.textContent = d.history_cta;

      document.getElementById('stats_title').textContent = d.stats_title;
      statsCta.textContent = d.stats_cta;

      document.getElementById('damage_title').textContent = d.damage_title;
      damageCta.textContent = d.damage_cta;

      document.getElementById('donation_title').textContent = d.donation_title;
      document.getElementById('donation_desc').textContent = d.donation_desc;
      document.getElementById('qr_label').textContent = d.qr_label;
      document.getElementById('tng_label').textContent = d.tng_label;
      document.getElementById('paypal_label').textContent = d.paypal_label;
      document.getElementById('paypal_btn').textContent = d.paypal_btn;
      document.getElementById('donate_button').textContent = d.donate_button;

      if (lang === 'ar') {
        document.body.classList.add('rtl');
      } else {
        document.body.classList.remove('rtl');
      }

      // refresh chart
      if (chartsLoaded) drawChartsLive();
    }

    langSelect.addEventListener('change', () => applyLanguage(langSelect.value));
    applyLanguage(currentLang);

    // Fungsi fetch & draw live chart
    async function drawChartsLive(){
      if (!chartsLoaded) return;
      const d = langData[currentLang];

      const dailyUrl = 'https://data.techforpalestine.org/api/casualties/daily'; // contoh endpoint
      try {
        const resp = await fetch(dailyUrl);
        if (!resp.ok) throw new Error("Fetch error");
        const data = await resp.json();
        // expect data = array of { date, killed, children, women, elderly }

        // Bar chart korban harian (30 hari terakhir)
        const last30 = data.slice(-30);
        const barArr = [[d.chart_stats_title, 'Killed']];
        last30.forEach(r => {
          barArr.push([r.date, Number(r.killed) || 0]);
        });
        const statsData = google.visualization.arrayToDataTable(barArr);
        const statsOptions = {
          title: d.chart_stats_title + " ‚Äî 30 hari terakhir",
          height: 340,
          legend: { position: 'none' },
          chartArea: { left: 60, right: 20, top: 50, bottom: 80 },
          colors: ['#ca3a3a']
        };
        const statsChart = new google.visualization.ColumnChart(document.getElementById('chart_stats'));
        statsChart.draw(statsData, statsOptions);

        // Pie chart pecahan umur (gunakan data breakdown jika ada)
        const latest = last30[last30.length - 1] || {};
        let childPct = 0, womenPct = 0, elderlyPct = 0;
        if (latest.children != null && latest.women != null && latest.elderly != null) {
          const tot = (latest.children + latest.women + latest.elderly);
          if (tot > 0) {
            childPct = (latest.children / tot) * 100;
            womenPct = (latest.women / tot) * 100;
            elderlyPct = (latest.elderly / tot) * 100;
          }
        } else {
          // default anggaran jika tiada data
          childPct = 40; womenPct = 33; elderlyPct = 7;
        }

        const pieData = google.visualization.arrayToDataTable([
          [d.chart_damage_title, 'Percentage'],
          [d.chart_stats_description.split(',')[0].trim(), childPct],
          [d.chart_stats_description.split(',')[1].trim(), womenPct],
          [d.chart_stats_description.split(',')[2].trim(), elderlyPct],
        ]);
        const pieOptions = {
          title: d.chart_damage_title + " ‚Äî pecahan umur",
          height: 320,
          pieHole: 0.36,
          legend: { position: 'bottom' }
        };
        const pieChart = new google.visualization.PieChart(document.getElementById('chart_damage'));
        pieChart.draw(pieData, pieOptions);

        // update nota
        document.getElementById('stats_note').textContent = `Data korban diambil dari Tech For Palestine. Tarikh terakhir: ${last30[last30.length - 1].date}.`;
        document.getElementById('damage_note').textContent = `Pecahan umur dianggarkan berdasarkan data terbaru.`;
      } catch (e) {
        console.error("Gagal fetch data live:", e);
        document.getElementById('stats_note').textContent = "Gagal muat data live ‚Äî menggunakan fallback.";
        document.getElementById('damage_note').textContent = "";
      }
    }

    // Derma demo
    function submitDonation(){
      const name = document.getElementById('nameField').value.trim();
      if (!name) {
        alert(currentLang === 'ar' ? 'Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿßÿ≥ŸÖ' : (currentLang === 'en' ? 'Please enter your name' : 'Sila masukkan nama'));
        return;
      }
      alert(currentLang === 'ar' ? 'ÿ¥ŸÉÿ±Ÿãÿß ŸÑÿ™ÿ®ÿ±ÿπŸÉ! (ÿ™ÿ¨ÿ±Ÿäÿ®Ÿä)' : (currentLang === 'en' ? 'Thank you for your donation! (demo)' : 'Terima kasih atas sumbangan! (demo)'));
    }

    // OKU akses
    let oku = false;
    okuBtn.addEventListener('click', () => {
      oku = !oku;
      if (oku) {
        document.body.style.fontSize = '1.25rem';
        okuBtn.textContent = currentLang === 'ar' ? 'ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä ‚ôø' : '‚ôø Mod Biasa';
      } else {
        document.body.style.fontSize = '';
        okuBtn.textContent = currentLang === 'ar' ? '‚ôø ŸÜŸÖÿ∑ ÿßŸÑŸàÿµŸàŸÑ' : '‚ôø Mesra OKU';
      }
    });
  </script>
</body>
</html>
